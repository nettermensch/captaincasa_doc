<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Drag &amp; Drop</li><li>Drag &amp; Drop</li></ul></p>
<p>This is a simple demo of drag &amp; drop between components. But, the good news, it covers all you need to know about drag &amp; drop!<br><br>The components, that you can drag from, need to specify what they send by using their DRAGSEND attribute. The attribute contains a string that follows the format &#34;type:value&#34;, e.g. &#34;article:apple&#34;.<br>The components, that you can drop to, need to specify what information they accept by specifying all the valid types in the DROPRECEIVE attribute, e.g. &#34;article&#34;. This can also be a comma separated list of values.<br><br>Both DRAGSEND and DROPRECEIVE are defined in a static way within this example, of course you an use any kind of expression as well, in order to bind them to your managed beans.<br><br>On server side the component that you drop information onto, triggers a request to the server. The corresponding action listener is called, the event type &#34;BaseActionEventDrop&#34; or &#34;BaseActionEventDropCopy&#34; is used. The event provides information about the drag information that was defined by the component you dragged from - so that you can react correspondingly on server side.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;objectbinding=&#34;#{d.DemoDragDropSimple}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_3&#34;&nbsp;text=&#34;Drag&nbsp;these&nbsp;articles...&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:icon&nbsp;id=&#34;g_5&#34;&nbsp;dragsend=&#34;article:apple&#34;&nbsp;image=&#34;/images/touch/apple.png&#34;&nbsp;/&gt;<br>&lt;t:icon&nbsp;id=&#34;g_6&#34;&nbsp;dragsend=&#34;article:kiwi&#34;&nbsp;image=&#34;/images/touch/kiwi.png&#34;&nbsp;/&gt;<br>&lt;t:icon&nbsp;id=&#34;g_7&#34;&nbsp;dragsend=&#34;article:salad&#34;&nbsp;image=&#34;/images/touch/salad.png&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_8&#34;&nbsp;height=&#34;50&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_9&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_10&#34;&nbsp;text=&#34;...onto&nbsp;this&nbsp;cashier!&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_11&#34;&nbsp;&gt;<br>&lt;t:icon&nbsp;id=&#34;g_12&#34;&nbsp;actionListener=&#34;#{d.DemoDragDropSimple.onCashierActions}&#34;&nbsp;dropreceive=&#34;article&#34;&nbsp;image=&#34;/images/touch/cashier.gif&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_13&#34;&nbsp;width=&#34;50&#34;&nbsp;/&gt;<br>&lt;t:fixgrid&nbsp;id=&#34;g_14&#34;&nbsp;background=&#34;#00000010&#34;&nbsp;border=&#34;top:0;left:0;right:0;bottom:0&#34;&nbsp;objectbinding=&#34;#{d.DemoDragDropSimple.articleRows}&#34;&nbsp;rowheight=&#34;16&#34;&nbsp;sbvisibleamount=&#34;5&#34;&nbsp;suppressheadline=&#34;true&#34;&nbsp;&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_15&#34;&nbsp;text=&#34;Image&#34;&nbsp;width=&#34;20&#34;&nbsp;&gt;<br>&lt;t:image&nbsp;id=&#34;g_16&#34;&nbsp;height=&#34;16&#34;&nbsp;image=&#34;.{image}&#34;&nbsp;width=&#34;16&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_17&#34;&nbsp;text=&#34;Distance&#34;&nbsp;width=&#34;10&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_18&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_19&#34;&nbsp;text=&#34;Article&#34;&nbsp;width=&#34;100&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_20&#34;&nbsp;text=&#34;.{article}&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;/t:fixgrid&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_21&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_22&#34;&nbsp;/&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventDrop;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventInvoke;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDItem;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDListBinding;<br>import&nbsp;org.eclnt.jsfserver.managedbean.IDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoDragDropSimple}&#34;)<br><br>public&nbsp;class&nbsp;DemoDragDropSimple<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;class&nbsp;ArticleRow&nbsp;extends&nbsp;FIXGRIDItem&nbsp;implements&nbsp;java.io.Serializable<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_article;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getArticle()&nbsp;{&nbsp;return&nbsp;m_article;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setArticle(String&nbsp;value)&nbsp;{&nbsp;m_article&nbsp;=&nbsp;value;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getImage()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#34;/images/touch/&#34;+m_article+&#34;.png&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;FIXGRIDListBinding&lt;ArticleRow&gt;&nbsp;m_articleRows&nbsp;=&nbsp;new&nbsp;FIXGRIDListBinding&lt;ArticleRow&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoDragDropSimple(IDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;FIXGRIDListBinding&lt;ArticleRow&gt;&nbsp;getArticleRows()&nbsp;{&nbsp;return&nbsp;m_articleRows;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onCashierActions(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventDrop)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Drop-Event&nbsp;was&nbsp;processed:&nbsp;&#34;&nbsp;+&nbsp;event.getClass().getName());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseActionEventDrop&nbsp;baed&nbsp;=&nbsp;(BaseActionEventDrop)event;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;dragInfo&nbsp;=&nbsp;baed.getDragInfo();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(dragInfo.startsWith(&#34;article:&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;article&nbsp;=&nbsp;dragInfo.substring(&#34;article:&#34;.length());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ArticleRow&nbsp;ar&nbsp;=&nbsp;new&nbsp;ArticleRow();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ar.setArticle(article);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_articleRows.getItems().add(ar);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventInvoke)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Cashier&nbsp;Icon&nbsp;was&nbsp;pressed!&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
