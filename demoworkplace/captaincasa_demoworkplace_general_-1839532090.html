<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>General</li><li>Asynchronous Processing</li><li>Call Server on User Inactivity</li></ul></p>
<p>Key in some data into the fields. After two seconds of inactity on your side the validation of the form will be called automatically.<br><br><br>The component CALLSERVERONUSERINACTIVITY observes the activity of the user at client side. If the user does not execute any significant event (mouse click, keyboard click) AND if there is no roundtrip for a certain duration, then a call is executed to the server side, invoking the associated action listener.<br><br>Examples for using the component:<br><br>1. in a form you want to validate the data that the user specifies. Instead of adding some flush to each component you define that after a certain period of time the validation of the data is executed.<br>2. you want to start a certain activity if the client is not used for a certain while (e.g. shut down some server side functions)<br><br>The calling after inactivity is only executed once! So there is no constant calling of the server in case of user inactivity. For constant calling use component TIMER.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:beanprocessing&nbsp;id=&#34;g_1&#34;&nbsp;&gt;<br>&lt;t:callserveroninactivity&nbsp;id=&#34;g_2&#34;&nbsp;actionListener=&#34;#{d.DemoFormValidation.onValidate}&#34;&nbsp;duration=&#34;2000&#34;&nbsp;/&gt;<br>&lt;/t:beanprocessing&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_3&#34;&nbsp;objectbinding=&#34;#{d.DemoFormValidation}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;First&nbsp;Name&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_6&#34;&nbsp;bgpaint=&#34;mandatory()&#34;&nbsp;text=&#34;#{d.DemoFormValidation.firstName}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_7&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_8&#34;&nbsp;text=&#34;Last&nbsp;Name&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_9&#34;&nbsp;bgpaint=&#34;mandatory()&#34;&nbsp;text=&#34;#{d.DemoFormValidation.lastName}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_10&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_11&#34;&nbsp;text=&#34;Zip&nbsp;Code&nbsp;/&nbsp;Town&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_12&#34;&nbsp;actionListener=&#34;#{d.DemoFormValidation.onZipCodeAction}&#34;&nbsp;flush=&#34;true&#34;&nbsp;regex=&#34;[0123456789]{5}&#34;&nbsp;regexhint=&#34;A&nbsp;German&nbsp;zip&nbsp;code&nbsp;has&nbsp;exactly&nbsp;5&nbsp;digits.&#34;&nbsp;text=&#34;#{d.DemoFormValidation.zipCode}&#34;&nbsp;width=&#34;80&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_13&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_14&#34;&nbsp;text=&#34;#{d.DemoFormValidation.town}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_15&#34;&nbsp;height=&#34;50&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_16&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_17&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_18&#34;&nbsp;actionListener=&#34;#{d.DemoFormValidation.onValidate}&#34;&nbsp;text=&#34;Validate&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventFlush;<br>import&nbsp;org.eclnt.jsfserver.pagebean.PageBean;<br>import&nbsp;org.eclnt.util.valuemgmt.ValueManager;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoFormValidation}&#34;)<br><br>public&nbsp;class&nbsp;DemoFormValidation<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;members<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_firstName;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_lastName;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_zipCode;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_town;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;m_numberOfErrors&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;constructors&nbsp;&amp;&nbsp;initialization<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoFormValidation(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getPageName()&nbsp;{&nbsp;return&nbsp;&#34;/workplace/demoformvalidation.jsp&#34;;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getRootExpressionUsedInPage()&nbsp;{&nbsp;return&nbsp;&#34;#{d.DemoFormValidation}&#34;;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getTown()&nbsp;{&nbsp;return&nbsp;m_town;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setTown(String&nbsp;value)&nbsp;{&nbsp;this.m_town&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getZipCode()&nbsp;{&nbsp;return&nbsp;m_zipCode;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setZipCode(String&nbsp;value)&nbsp;{&nbsp;this.m_zipCode&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getLastName()&nbsp;{&nbsp;return&nbsp;m_lastName;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLastName(String&nbsp;value)&nbsp;{&nbsp;this.m_lastName&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFirstName()&nbsp;{&nbsp;return&nbsp;m_firstName;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFirstName(String&nbsp;value)&nbsp;{&nbsp;this.m_firstName&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onValidate(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validate();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onZipCodeAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventFlush)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&#34;69245&#34;.equals(m_zipCode))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_town&nbsp;=&nbsp;&#34;Bammental&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;private&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;validate()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_numberOfErrors&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkNotNull(m_firstName,&#34;First&nbsp;Name&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkNotNull(m_lastName,&#34;Last&nbsp;Name&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_zipCode&nbsp;!=&nbsp;null&nbsp;&amp;&amp;&nbsp;m_zipCode.trim().length()&nbsp;&gt;&nbsp;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ValueManager.checkIfStringMatchesRegularExpression(m_zipCode,&#34;[0123456789]5&#34;)&nbsp;==&nbsp;false)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_numberOfErrors++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkNotNull(m_town,&#34;Town&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_town&nbsp;!=&nbsp;null&nbsp;&amp;&amp;&nbsp;m_town.trim().length()&nbsp;&gt;&nbsp;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkNotNull(m_zipCode,&#34;Zip&nbsp;Code&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;checkNotNull(String&nbsp;value,&nbsp;String&nbsp;fieldName)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;null&nbsp;||&nbsp;value.trim().length()&nbsp;==&nbsp;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputError(&#34;Missing&nbsp;definition:&nbsp;&#34;&nbsp;+&nbsp;fieldName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_numberOfErrors++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></p>
</body>
</html>
