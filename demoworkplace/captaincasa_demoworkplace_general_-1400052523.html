<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>General</li><li>Client Integration</li><li>Client File API (Java Client only)</li><li>File Pusher</li></ul></p>
<p>The file pusher is an invisible component that allows to establish a client side file interface for sending data to the client.<br><br>When triggered (TRIGGER attribute) then the binary content contained in HEXCONTENT is transferred into the file that is defined by FILENAME. By default existing files are overwritten - when defining FILEOVERWRITE as false, the no overwriting will take place, in this case the attempt to write will just be ignored.<br><br>You can set attribute FILEREMOVEONDESTROY to &#34;true&#34; - in this case the file will be removed automatically on client side then the CLIENTFILEPUSHER component is destroyed. This happens when the (invisible) component is removed from the client side component tree (e.g. because it is part of an included page that is not shown anymore).</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:beanprocessing&nbsp;id=&#34;g_1&#34;&nbsp;&gt;<br>&lt;t:clientfilepusher&nbsp;id=&#34;g_2&#34;&nbsp;filename=&#34;#{d.DemoFilePusher.fileName}&#34;&nbsp;fileoverwrite=&#34;true&#34;&nbsp;fileremoveondestroy=&#34;true&#34;&nbsp;hexcontent=&#34;#{d.DemoFilePusher.fileContent}&#34;&nbsp;trigger=&#34;#{d.DemoFilePusher.writeFileTrigger}&#34;&nbsp;/&gt;<br>&lt;/t:beanprocessing&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_3&#34;&nbsp;objectbinding=&#34;#{d.DemoFilePusher}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;File&nbsp;name&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;#{d.DemoFilePusher.fileName}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_7&#34;&nbsp;&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_8&#34;&nbsp;height=&#34;200&#34;&nbsp;text=&#34;#{d.DemoFilePusher.text}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_9&#34;&nbsp;&gt;<br>&lt;t:button&nbsp;id=&#34;g_10&#34;&nbsp;actionListener=&#34;#{d.DemoFilePusher.onTrigger}&#34;&nbsp;text=&#34;Push&nbsp;Content&nbsp;to&nbsp;Client&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_11&#34;&nbsp;height=&#34;30&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_12&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_13&#34;&nbsp;text=&#34;Hex&nbsp;representation&nbsp;of&nbsp;file&nbsp;content&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_14&#34;&nbsp;&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_15&#34;&nbsp;enabled=&#34;false&#34;&nbsp;height=&#34;100&#34;&nbsp;text=&#34;#{d.DemoFilePusher.fileContent}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.util.Trigger;<br>import&nbsp;org.eclnt.util.valuemgmt.ValueManager;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br>import&nbsp;org.eclnt.workplace.WorkpageDispatchedBean;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoFilePusher}&#34;)<br><br>public&nbsp;class&nbsp;DemoFilePusher<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;WorkpageDispatchedPageBean&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_fileName&nbsp;=&nbsp;&#34;c:/temp/fromserver.txt&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFileName()&nbsp;{&nbsp;return&nbsp;m_fileName;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFileName(String&nbsp;value)&nbsp;{&nbsp;this.m_fileName&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_text&nbsp;=&nbsp;&#34;This&nbsp;is&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;file&nbsp;to&nbsp;be&nbsp;created&nbsp;on&nbsp;client&nbsp;side.&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getText()&nbsp;{&nbsp;return&nbsp;m_text;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setText(String&nbsp;value)&nbsp;{&nbsp;this.m_text&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Trigger&nbsp;m_writeFileTrigger&nbsp;=&nbsp;new&nbsp;Trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Trigger&nbsp;getWriteFileTrigger()&nbsp;{&nbsp;return&nbsp;m_writeFileTrigger;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_fileContent;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFileContent()&nbsp;{&nbsp;return&nbsp;m_fileContent;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;constructors&nbsp;&amp;&nbsp;initialization<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoFilePusher(IWorkpageDispatcher&nbsp;workpageDispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(workpageDispatcher);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onTrigger(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;byte[]&nbsp;bytes&nbsp;=&nbsp;m_text.getBytes(&#34;UTF-8&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_fileContent&nbsp;=&nbsp;ValueManager.encodeHexString(bytes);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_writeFileTrigger.trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;(Throwable&nbsp;t)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputError(t.toString(),ValueManager.getStackstraceString(t));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
