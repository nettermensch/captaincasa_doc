<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>General</li><li>Client Integration</li><li>Client HTTP Sender</li></ul></p>
<p>The component CLIENTHTTPSENDER allows to send a URL from the client to any other receiving system. The response of the http-request can be transferred back to the server processing.<br><br>A typical usage scenario for this component is: you want to connect to a client side system that is accessed through an http interface. From the server side processing you typically cannot connect to the client side because of firewall restrictions. Now, with using the CLIENTHTTPSENDER component, the connection to your client side system is done from client side - the result is transferred back into the server side processing.<br><br>Please do not mis-use this component! You should not / must not use this component as multi-prupose communicator to reach systems which you are not allowed to reach from server side because of network restrictions!<br><br>The callback to the server side processing is only done if the attribute URLCALLBACK is set to true. On server side a special event (BaseActionEventClientHttpSend) is passed. The response of the called system is passed back as Hexstring/ byte array or UTF-8 string.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:beanprocessing&nbsp;id=&#34;g_1&#34;&nbsp;&gt;<br>&lt;t:clienthttpsender&nbsp;id=&#34;g_2&#34;&nbsp;actionListener=&#34;#{d.DemoClientHttpSend.onSendAction}&#34;&nbsp;httpheaderparams=&#34;#{d.DemoClientHttpSend.headerParamsCSV}&#34;&nbsp;trigger=&#34;#{d.DemoClientHttpSend.trigger}&#34;&nbsp;url=&#34;#{d.DemoClientHttpSend.url}&#34;&nbsp;urlcallback=&#34;true&#34;&nbsp;urlpostdata=&#34;#{d.DemoClientHttpSend.postString}&#34;&nbsp;/&gt;<br>&lt;/t:beanprocessing&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_3&#34;&nbsp;objectbinding=&#34;#{d.DemoClientHttpSend}&#34;&nbsp;rowdistance=&#34;4&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;URL&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;#{d.DemoClientHttpSend.url}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_7&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_8&#34;&nbsp;text=&#34;Post&nbsp;String&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_9&#34;&nbsp;height=&#34;75&#34;&nbsp;text=&#34;#{d.DemoClientHttpSend.postString}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_10&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_11&#34;&nbsp;text=&#34;Http&nbsp;Header&nbsp;CSV&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_12&#34;&nbsp;height=&#34;50&#34;&nbsp;text=&#34;#{d.DemoClientHttpSend.headerParamsCSV}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_13&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_14&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_15&#34;&nbsp;actionListener=&#34;#{d.DemoClientHttpSend.onTrigger}&#34;&nbsp;text=&#34;Execute&nbsp;Request&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_16&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_17&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_18&#34;&nbsp;rowalignmenty=&#34;top&#34;&nbsp;text=&#34;Result&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_19&#34;&nbsp;height=&#34;100%&#34;&nbsp;text=&#34;#{d.DemoClientHttpSend.result}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventClientHttpSend;<br>import&nbsp;org.eclnt.jsfserver.elements.util.Trigger;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoClientHttpSend}&#34;)<br><br>public&nbsp;class&nbsp;DemoClientHttpSend<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;WorkpageDispatchedPageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;inner&nbsp;classes<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;members<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;Trigger&nbsp;m_trigger&nbsp;=&nbsp;new&nbsp;Trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_result;<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_url&nbsp;=&nbsp;&#34;http://www.captaincasa.com/index.html&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_postString&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_headerParamsCSV&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;constructors<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoClientHttpSend(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_postString&nbsp;=&nbsp;&#34;&lt;KAHA_NAME&gt;M&amp;#246;ller&lt;/KAHA_NAME&gt;&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;private&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Trigger&nbsp;getTrigger()&nbsp;{&nbsp;return&nbsp;m_trigger;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setTrigger(Trigger&nbsp;value)&nbsp;{&nbsp;m_trigger&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getResult()&nbsp;{&nbsp;return&nbsp;m_result;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setResult(String&nbsp;value)&nbsp;{&nbsp;m_result&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getUrl()&nbsp;{&nbsp;return&nbsp;m_url;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setUrl(String&nbsp;value)&nbsp;{&nbsp;m_url&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getHeaderParamsCSV()&nbsp;{&nbsp;return&nbsp;m_headerParamsCSV;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setHeaderParamsCSV(String&nbsp;headerParamsCSV)&nbsp;{&nbsp;m_headerParamsCSV&nbsp;=&nbsp;headerParamsCSV;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setPostString(String&nbsp;value)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_postString&nbsp;=&nbsp;value;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_postString&nbsp;!=&nbsp;null&nbsp;&amp;&amp;&nbsp;m_postString.length()&nbsp;==&nbsp;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_postString&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getPostString()&nbsp;{&nbsp;return&nbsp;m_postString;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSendAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventClientHttpSend)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseActionEventClientHttpSend&nbsp;sevent&nbsp;=&nbsp;(BaseActionEventClientHttpSend)event;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_result&nbsp;=&nbsp;sevent.getSuccess()&nbsp;+&nbsp;&#34;&#92;n&#92;n&#34;&nbsp;+&nbsp;sevent.getResponseAsUTF8String();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(sevent.getSuccess()&nbsp;==&nbsp;false)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_result&nbsp;+=&nbsp;&#34;&#92;n&#92;nPlease&nbsp;check&nbsp;the&nbsp;URL&nbsp;first.&nbsp;If&nbsp;correct:&nbsp;open&nbsp;development&nbsp;mode&nbsp;in&nbsp;browser&nbsp;and&nbsp;check&nbsp;the&nbsp;log.&#34;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&#34;&#92;nIn&nbsp;the&nbsp;log&nbsp;you&nbsp;typically&nbsp;find&nbsp;the&nbsp;explanation&nbsp;why&nbsp;the&nbsp;communication&nbsp;failed&nbsp;-&nbsp;typical&nbsp;example:&nbsp;the&nbsp;page&nbsp;has&nbsp;to&nbsp;define&nbsp;its&nbsp;CORS&nbsp;policy&nbsp;to&nbsp;allow&nbsp;the&nbsp;client&nbsp;to&nbsp;communicate&nbsp;to&nbsp;different&nbsp;servers.&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onTrigger(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_trigger.trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
