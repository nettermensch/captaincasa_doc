<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Field Control</li><li>Date Input</li><li>Date Input</li></ul></p>
<p>There are three components that are available for providing date input:<br><br>(a) The CALENDAR component directly shows a calendar control within the page. The currently selected date is marked in the calendar.<br><br>(b) With the FORMATTEDFIELD component you can define the attribute FORMAT to be &#34;date&#34;.<br><br>(c) The CALENDARFIELD component in addtion to (b) provides the function to open up a calendar popup for date input.<br><br>For all three components the display stlye of the date is dependent from the Locale that is associated with the client. You can set the locale via a start parameter of the client.<br><br>When maintaining a date, then the &#34;long&#34;-format of a date is sent from the client to ther server and back. This corresponds to the internal long value of the java.util.Date class. For this reason you always need to define the TIMEZONE attribute when working with dates. The TIMEZONE is definded by the server. Do not pass &#34;null&#34; to the client as time zone, because then it may happen that the client&#39;s time zone does not match the server&#39;s time zone!</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;objectbinding=&#34;#{d.demoCalendar}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&amp;#39;@defaultrowdistance@&amp;#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_3&#34;&nbsp;text=&#34;Date&nbsp;as&nbsp;Calendar&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendar&nbsp;id=&#34;g_4&#34;&nbsp;actionListener=&#34;#{d.demoCalendar.onDateAction}&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_5&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;Date&nbsp;as&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_7&#34;&nbsp;actionListener=&#34;#{d.demoCalendar.onDateAction}&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;date&#34;&nbsp;labeltext=&#34;Date&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_8&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_9&#34;&nbsp;text=&#34;Date&nbsp;as&nbsp;Calendar&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_10&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;labeltext=&#34;Date&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_11&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_12&#34;&nbsp;text=&#34;Time&nbsp;as&nbsp;Calendar&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_13&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;datetime&#34;&nbsp;formatmask=&#34;short&#34;&nbsp;labeltext=&#34;Date&nbsp;&amp;amp;&nbsp;time&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_14&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_15&#34;&nbsp;text=&#34;Time&nbsp;as&nbsp;Calendar&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_16&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;datetime&#34;&nbsp;formatmask=&#34;medium&#34;&nbsp;labeltext=&#34;Date&nbsp;&amp;amp;&nbsp;time&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_17&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_18&#34;&nbsp;text=&#34;Time&nbsp;as&nbsp;Calendar&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_19&#34;&nbsp;exacttime=&#34;true&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;time&#34;&nbsp;formatmask=&#34;medium&#34;&nbsp;labeltext=&#34;Time&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;80&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_21&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_22&#34;&nbsp;text=&#34;Time&nbsp;as&nbsp;Calendar&nbsp;Field&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_27&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;datetime&#34;&nbsp;formatmask=&#34;yyyy-MM-dd&nbsp;HH:mm:ss:SSS&#34;&nbsp;labeltext=&#34;Date&nbsp;&amp;amp;&nbsp;time&nbsp;with&nbsp;milliseconds&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;200&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_29&#34;&nbsp;width=&#34;7&#34;&nbsp;/&gt;<br>&lt;t:calendarfield&nbsp;id=&#34;g_25&#34;&nbsp;flush=&#34;true&#34;&nbsp;format=&#34;time&#34;&nbsp;formatmask=&#34;HH:mm:ss:SSS&#34;&nbsp;labeltext=&#34;Time&nbsp;with&nbsp;milliseconds&#34;&nbsp;timezone=&#34;CET&#34;&nbsp;value=&#34;#{d.demoCalendar.date}&#34;&nbsp;width=&#34;170&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.text.DateFormat;<br>import&nbsp;java.util.Calendar;<br>import&nbsp;java.util.Date;<br>import&nbsp;java.util.TimeZone;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventFlush;<br>import&nbsp;org.eclnt.jsfserver.util.ClientTestLog;<br>import&nbsp;org.eclnt.jsfserver.util.IClientLogAware;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>public&nbsp;class&nbsp;DemoCalendar&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;IClientLogAware<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;m_date;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoCalendar(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRefComponent(&#34;calendarfield&#34;);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Date&nbsp;getDate()&nbsp;{&nbsp;return&nbsp;m_date;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setDate(Date&nbsp;date)&nbsp;{&nbsp;m_date&nbsp;=&nbsp;date;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onDateAction(ActionEvent&nbsp;ae)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ae&nbsp;instanceof&nbsp;BaseActionEventFlush)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_date&nbsp;!=&nbsp;null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calendar&nbsp;cal&nbsp;=&nbsp;Calendar.getInstance(TimeZone.getTimeZone(&#34;CET&#34;));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DateFormat&nbsp;sdf&nbsp;=&nbsp;DateFormat.getDateTimeInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sdf.setCalendar(cal);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;New&nbsp;date&nbsp;was&nbsp;selected:&nbsp;&#34;&nbsp;+&nbsp;sdf.format(m_date)&nbsp;+&nbsp;&#34;&nbsp;(&#34;+m_date.getTime()+&#34;)&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Date&nbsp;was&nbsp;set&nbsp;to&nbsp;null&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;onCreateClientTestLogMessage()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_date&nbsp;!=&nbsp;null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientTestLog.addClientTestLogMessage(&#34;&#34;&nbsp;+&nbsp;m_date.getTime());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientTestLog.addClientTestLogMessage(&#34;null&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></p>
</body>
</html>
