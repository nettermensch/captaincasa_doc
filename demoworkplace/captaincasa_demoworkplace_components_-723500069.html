<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Open Street Map</li><li>Simple Scenario</li></ul></p>
<p>The Open Street Map (OSM) Viewer renders the maps that are available within the OSM project.<br><br>Definitions are quite simple:<br><br>(.) Within the OSMVIEWER component you define the center point of the map (latitude/longitude) and the scroll level.<br>(.) Below the OSMVIEWER you can place OSMVIEWERWAYPOINT components, each one holding a coordinate, a width/height (pixels) and a BGPAINT command for rendering the content.<br><br>There are some events that you can register to:<br>(.) OSMVIEWER sends a BaseActionEventOsmviewerSelection event when the user clicks into the map - but only if the mouse-down and mouse-up position are exactly the same. The selected latitude/longitude values can be accessed from the corresponding event information.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;objectbinding=&#34;#{d.DemoOsmViewer}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_3&#34;&nbsp;text=&#34;Latitude&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_4&#34;&nbsp;format=&#34;double&#34;&nbsp;formatmask=&#34;decmax20&#34;&nbsp;value=&#34;#{d.DemoOsmViewer.latitudeToSet}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_5&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;Longitude&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_7&#34;&nbsp;format=&#34;double&#34;&nbsp;formatmask=&#34;decmax20&#34;&nbsp;value=&#34;#{d.DemoOsmViewer.longitudeToSet}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_8&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_9&#34;&nbsp;text=&#34;Zoom&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:spinner&nbsp;id=&#34;g_10&#34;&nbsp;maxvalue=&#34;19&#34;&nbsp;minvalue=&#34;0&#34;&nbsp;value=&#34;#{d.DemoOsmViewer.zoom}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_11&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_12&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_13&#34;&nbsp;actionListener=&#34;#{d.DemoOsmViewer.onSetPosition}&#34;&nbsp;text=&#34;Take&nbsp;over&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_14&#34;&nbsp;height=&#34;10&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_15&#34;&nbsp;&gt;<br>&lt;t:osmviewer&nbsp;id=&#34;g_16&#34;&nbsp;actionListener=&#34;#{d.DemoOsmViewer.onSelection}&#34;&nbsp;height=&#34;100%&#34;&nbsp;latitude=&#34;#{d.DemoOsmViewer.latitude}&#34;&nbsp;longitude=&#34;#{d.DemoOsmViewer.longitude}&#34;&nbsp;osmzoom=&#34;#{d.DemoOsmViewer.zoom}&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:osmviewerwaypoint&nbsp;id=&#34;g_17&#34;&nbsp;actionListener=&#34;#{d.DemoOsmViewer.onPoint1Action}&#34;&nbsp;hideinfopopup=&#34;true&#34;&nbsp;latitude=&#34;49.411112809289975&#34;&nbsp;longitude=&#34;8.715183734893799&#34;&nbsp;markerimage=&#34;data:image/svg+xml;base64,PHN2ZyBpZD0iZTMwNmJkMmQtY2UxMy00ZmEzLTg2MjctOGVkMzE4OGNkNzBhIiBkYXRhLW5hbWU9IkViZW5lIDEyIEtvcGllIEtvcGllIEtvcGllIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PGRlZnM+PHN0eWxlPi5cMzQgMGRmNmEzZS1kYzViLTQ3MGMtYjg3NS0yMjNjY2E0ZTZmN2V7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS1taXRlcmxpbWl0OjEwO30uXDM2IDM2MTM3ZDctYTFiOS00YjU2LTliODItMDU5ZjA1OGNmOWNie2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFjbV9lYzA3X2RldmljZS1tYW5hZ2VtZW50PC90aXRsZT48cG9seWxpbmUgY2xhc3M9IjQwZGY2YTNlLWRjNWItNDcwYy1iODc1LTIyM2NjYTRlNmY3ZSIgcG9pbnRzPSIxMC4wMTMgMTIuOTUyIDEyLjE0NCAxNS4xOTcgMTUuNTgyIDEwLjQ1MiIvPjxwYXRoIGQ9Ik04Ljk4MywwYS41ODMuNTgzLDAsMCwxLC42MDYuNjA2VjkuMDg0YS41ODMuNTgzLDAsMCwxLS42MDYuNjA2SDQuMTRhLjU4My41ODMsMCwwLDEtLjYwNi0uNjA2Vi42MDlBLjU4My41ODMsMCwwLDEsNC4xNCwwWm0wLC42MDVINC4xNFY5LjA4NEg4Ljk4M1pNNS4wNDgsOC40NzhhLjMuMywwLDAsMSwwLS42MDVIOC4wNzVhLjMuMywwLDAsMSwwLC42MDVaTTcuNDcsMy4wM2EuOS45LDAsMCwxLS45MDgtLjkwOC45MDguOTA4LDAsMSwxLDEuODE2LDAsLjkuOSwwLDAsMS0uOTA4LjkwOFpNNS4wNDYsNy4zNTVhLjI2OC4yNjgsMCwwLDEtLjMtLjMuMjY4LjI2OCwwLDAsMSwuMy0uM0g4LjA3M2EuMjY4LjI2OCwwLDAsMSwuMy4zLjI2OC4yNjgsMCwwLDEtLjMuM1oiLz48cmVjdCBjbGFzcz0iNjM2MTM3ZDctYTFiOS00YjU2LTliODItMDU5ZjA1OGNmOWNiIiB4PSItMC42NzgiIHk9IjEuOTA3IiB3aWR0aD0iNy4xOTkiIGhlaWdodD0iOC45MjciIHJ4PSIxIiByeT0iMSIvPjxwYXRoIGQ9Ik01LjQ1NywyLjI2NmEuNTgzLjU4MywwLDAsMSwuNjA2LjYwNnY4LjQ3NmEuNTgzLjU4MywwLDAsMS0uNjA2LjYwNkguNjE0YS41ODMuNTgzLDAsMCwxLS42MDYtLjYwNlYyLjg3MmEuNTgzLjU4MywwLDAsMSwuNjA2LS42MDZabTAsLjYwNUguNjE0djguNDc2SDUuNDU3Wm0tMy45MzUsNy44N2EuMy4zLDAsMCwxLDAtLjYwNUg0LjU0OWEuMy4zLDAsMCwxLDAsLjYwNVpNMy45NDQsNS4yOTNhLjkuOSwwLDAsMS0uOTA4LS45MDguOS45LDAsMCwxLC45MDgtLjkwOC45LjksMCwwLDEsLjkwOC45MDguOS45LDAsMCwxLS45MDguOTA4WiIvPjwvc3ZnPg==&#34;&nbsp;markerimageheight=&#34;30&#34;&nbsp;markerimagewidth=&#34;30&#34;&nbsp;text=&#34;Point&nbsp;1&#34;&nbsp;bgpaint=&#34;rectangle(0,0,100%,100%,#00000080);write(100%-5,50%-2,Point&nbsp;1,16,#ffffff,bold,rightmiddle,0,1,1);image(5,50%,/images/icons/accept.png,leftmiddle)&#34;&nbsp;height=&#34;25&#34;&nbsp;tooltip=&#34;&amp;lt;html&amp;gt;&amp;lt;h2&amp;gt;Point&nbsp;1&amp;lt;/h2&amp;gt;This&nbsp;is&nbsp;a&nbsp;fabulous&nbsp;point.&amp;lt;br&amp;gt;You&nbsp;have&nbsp;to&nbsp;visit....!&amp;lt;/html&amp;gt;&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:osmviewerwaypoint&nbsp;id=&#34;g_18&#34;&nbsp;actionListener=&#34;#{d.DemoOsmViewer.onPoint2Action}&#34;&nbsp;hideinfopopup=&#34;true&#34;&nbsp;latitude=&#34;49.431112809289975&#34;&nbsp;longitude=&#34;8.735183734893799&#34;&nbsp;markerimage=&#34;/images/iconssvg/truck_red_20x20.svg&#34;&nbsp;markerimageheight=&#34;30&#34;&nbsp;markerimagewidth=&#34;30&#34;&nbsp;text=&#34;Point&nbsp;2&#34;&nbsp;bgpaint=&#34;rectangle(0,0,100%,100%,#00000080);write(100%-5,50%-2,Point&nbsp;2,16,#ffffff,bold,rightmiddle,0,1,1);image(5,50%,/images/icons/add.png,leftmiddle)&#34;&nbsp;height=&#34;25&#34;&nbsp;tooltip=&#34;&amp;lt;html&amp;gt;&amp;lt;h2&amp;gt;Point&nbsp;2&amp;lt;/h2&amp;gt;Also&nbsp;very&nbsp;nice&nbsp;-&nbsp;why&nbsp;not&nbsp;visit?&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/html&amp;gt;&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:osmviewer&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:rowstatusbar&nbsp;id=&#34;g_19&#34;&nbsp;/&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventOsmviewerSelection;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>public&nbsp;class&nbsp;DemoOsmViewer<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoOsmViewer(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRefComponent(&#34;osmviewer&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_latitude&nbsp;=&nbsp;49.411112809289975;<br>&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_longitude&nbsp;=&nbsp;8.715183734893799;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_latitudeToSet&nbsp;=&nbsp;m_latitude;<br>&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_longitudeToSet&nbsp;=&nbsp;m_longitude;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;m_zoom&nbsp;=&nbsp;10;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLatitude(double&nbsp;latitude)&nbsp;{&nbsp;m_latitude&nbsp;=&nbsp;latitude;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLongitude(double&nbsp;longitude)&nbsp;{&nbsp;m_longitude&nbsp;=&nbsp;longitude;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getLatitude()&nbsp;{&nbsp;return&nbsp;m_latitude;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getLongitude()&nbsp;{&nbsp;return&nbsp;m_longitude;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getLatitudeToSet()&nbsp;{&nbsp;return&nbsp;m_latitudeToSet;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLatitudeToSet(double&nbsp;latitudeToSet)&nbsp;{&nbsp;m_latitudeToSet&nbsp;=&nbsp;latitudeToSet;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getLongitudeToSet()&nbsp;{&nbsp;return&nbsp;m_longitudeToSet;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLongitudeToSet(double&nbsp;longitudeToSet)&nbsp;{&nbsp;m_longitudeToSet&nbsp;=&nbsp;longitudeToSet;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getZoom()&nbsp;{&nbsp;return&nbsp;m_zoom;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setZoom(int&nbsp;zoom)&nbsp;{&nbsp;m_zoom&nbsp;=&nbsp;zoom;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSelection(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventOsmviewerSelection)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseActionEventOsmviewerSelection&nbsp;e&nbsp;=&nbsp;(BaseActionEventOsmviewerSelection)event;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Selection:&nbsp;&#34;&nbsp;+&nbsp;e.getLatitude()&nbsp;+&nbsp;&#34;/&#34;&nbsp;+&nbsp;e.getLongitude());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_latitudeToSet&nbsp;=&nbsp;e.getLatitude();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_longitudeToSet&nbsp;=&nbsp;e.getLongitude();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSetPosition(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_latitude&nbsp;=&nbsp;m_latitudeToSet;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_longitude&nbsp;=&nbsp;m_longitudeToSet;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onPoint1Action(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Point&nbsp;1&nbsp;was&nbsp;selecetd.&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onPoint2Action(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;Point&nbsp;2&nbsp;was&nbsp;selecetd.&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
