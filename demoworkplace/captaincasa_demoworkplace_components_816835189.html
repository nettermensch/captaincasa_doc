<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Menus</li><li>Popup Menu</li></ul></p>
<p>Click with the right mouse button onto the labels, fields, the foldable pane and the body of the page. You will see different popup menus showing up, dependent from the component that you clicked on.<br><br>Popup menus are defined on top level of a page. In the example there are three popup menus defined, each getting an explicit id: &#34;POPUPMENU1&#34;, &#34;POPUPMENU2&#34; and &#34;POPUPMENU3&#34;.<br><br>For a component a popup menu is referenced by the POPUPMENU attribute. Have a look into the field, label or page body definition. Components can share the same popup menu. - The user interface will always show the popup menu which is reachable &#34;from bottom up&#34;: this means that it will start to check the availability of a popup menu with the control the user clicks on, then will continue with the next control layer (e.g. the container around) etc.<br><br>The reaction of a popup menu is done within the component&#39;s ACTIONLISTENER implementation. But pay attention: it is the action listener of the component that uses the popup menu - it&#39;s not the action listener of the popup menu item itself. Each popup menu item is associated with a command. This command is passed as command into the action listener processing of the receiving component. By this mechanism each component can react in a different way.<br><br>The command either is a simple string (as shown in the example) or can be a &#34;method call string&#34;, e.g. &#34;onXYZ(param1,param2)&#34;. When using the method call string format you can get the parameters passed by calling the BaseActionEvent.getParams() method.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowheader&nbsp;id=&#34;g_1&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onHeaderAction}&#34;&nbsp;popupmenu=&#34;POPUPMENU3&#34;&nbsp;&gt;<br>&lt;t:button&nbsp;id=&#34;g_2&#34;&nbsp;text=&#34;Some&nbsp;button&nbsp;(no&nbsp;function&nbsp;behind)&#34;&nbsp;/&gt;<br>&lt;/t:rowheader&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_3&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onBodyAction}&#34;&nbsp;objectbinding=&#34;#{d.demoPopupMenu}&#34;&nbsp;popupmenu=&#34;POPUPMENU3&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:foldablepane&nbsp;id=&#34;g_5&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onFoldablePaneAction}&#34;&nbsp;popupmenu=&#34;POPUPMENU4&#34;&nbsp;text=&#34;Foldable&nbsp;Pane&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_6&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_7&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onLabel1Action}&#34;&nbsp;popupmenu=&#34;POPUPMENU1&#34;&nbsp;text=&#34;Label&nbsp;1&#34;&nbsp;width=&#34;120&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_8&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onField1Action}&#34;&nbsp;popupmenu=&#34;POPUPMENU1&#34;&nbsp;width=&#34;200&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_9&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_10&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_11&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onLabel2Action}&#34;&nbsp;popupmenu=&#34;POPUPMENU2&#34;&nbsp;text=&#34;Label&nbsp;2&#34;&nbsp;width=&#34;120&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_12&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onField2Action}&#34;&nbsp;popupmenu=&#34;POPUPMENU2&#34;&nbsp;width=&#34;200&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:foldablepane&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_13&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_14&#34;&nbsp;actionListener=&#34;#{d.demoPopupMenu.onRowAction}&#34;&nbsp;popupmenu=&#34;POPUPMENU3&#34;&nbsp;&gt;<br>&lt;t:textpane&nbsp;id=&#34;g_15&#34;&nbsp;text=&#34;Some&nbsp;content&nbsp;in&nbsp;this&nbsp;row.&nbsp;The&nbsp;popup&nbsp;menu&nbsp;is&nbsp;defined&nbsp;on&nbsp;row&nbsp;level.&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:popupmenu&nbsp;id=&#34;POPUPMENU1&#34;&nbsp;&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_16&#34;&nbsp;command=&#34;OPTION1&#34;&nbsp;text=&#34;Option&nbsp;1&#34;&nbsp;/&gt;<br>&lt;t:menu&nbsp;id=&#34;g_17&#34;&nbsp;text=&#34;Option&nbsp;2&nbsp;&amp;amp;&nbsp;3&#34;&nbsp;&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_18&#34;&nbsp;command=&#34;OPTION2&#34;&nbsp;text=&#34;Option&nbsp;2&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_19&#34;&nbsp;command=&#34;OPTION3&#34;&nbsp;text=&#34;Option&nbsp;3&#34;&nbsp;/&gt;<br>&lt;/t:menu&gt;<br>&lt;/t:popupmenu&gt;<br>&lt;t:popupmenu&nbsp;id=&#34;POPUPMENU2&#34;&nbsp;&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_20&#34;&nbsp;command=&#34;OPTION4&#34;&nbsp;text=&#34;Option&nbsp;4&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_21&#34;&nbsp;command=&#34;OPTION5&#34;&nbsp;text=&#34;Option&nbsp;5&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_22&#34;&nbsp;command=&#34;OPTION6&#34;&nbsp;text=&#34;Option&nbsp;6&#34;&nbsp;/&gt;<br>&lt;/t:popupmenu&gt;<br>&lt;t:popupmenu&nbsp;id=&#34;POPUPMENU3&#34;&nbsp;popupborder=&#34;top:3;left:3;right:3;bottom:3;color:#808080&#34;&nbsp;&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_23&#34;&nbsp;command=&#34;OPTION7&#34;&nbsp;text=&#34;Option&nbsp;7&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_24&#34;&nbsp;command=&#34;OPTION8&#34;&nbsp;text=&#34;Option&nbsp;8&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_25&#34;&nbsp;command=&#34;OPTION9&#34;&nbsp;text=&#34;Option&nbsp;9&#34;&nbsp;/&gt;<br>&lt;/t:popupmenu&gt;<br>&lt;t:popupmenu&nbsp;id=&#34;POPUPMENU4&#34;&nbsp;&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_26&#34;&nbsp;command=&#34;OPTION10&#34;&nbsp;text=&#34;Option&nbsp;10&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_27&#34;&nbsp;command=&#34;OPTION11&#34;&nbsp;text=&#34;Option&nbsp;11&#34;&nbsp;/&gt;<br>&lt;t:menuitem&nbsp;id=&#34;g_28&#34;&nbsp;command=&#34;OPTION12&#34;&nbsp;text=&#34;Option&nbsp;12&#34;&nbsp;/&gt;<br>&lt;/t:popupmenu&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.BaseActionEvent;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventPopupMenuItem;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>public&nbsp;class&nbsp;DemoPopupMenu&nbsp;extends&nbsp;PageBean<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onLabel1Action(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;label1&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onLabel2Action(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;label2&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onField1Action(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;field1&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onField2Action(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;field2&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onBodyAction(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;body&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onFoldablePaneAction(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;foldablepane&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onHeaderAction(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;header&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onTitlebarAction(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;titlebar&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onRowAction(ActionEvent&nbsp;ae)&nbsp;{&nbsp;process(&#34;row&#34;,ae);&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoPopupMenu(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRefComponent(&#34;popupmenu&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;process(String&nbsp;component,&nbsp;ActionEvent&nbsp;ae)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ae&nbsp;instanceof&nbsp;BaseActionEventPopupMenuItem)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseActionEventPopupMenuItem&nbsp;bae&nbsp;=&nbsp;(BaseActionEventPopupMenuItem)ae;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputMessage<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&#34;Received&nbsp;popup&nbsp;menu&nbsp;command:&nbsp;&#34;&nbsp;+&nbsp;component&nbsp;+&nbsp;&#34;&nbsp;/&nbsp;&#34;&nbsp;+&nbsp;bae.getCommand()&nbsp;+&nbsp;&#34;/&#34;&nbsp;+&nbsp;bae.getPercentageHorizontal()&nbsp;+&nbsp;&#34;/&#34;&nbsp;+&nbsp;bae.getPercentageVertical());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></p>
</body>
</html>
