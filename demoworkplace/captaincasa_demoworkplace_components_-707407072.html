<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Reporting, PDF, SVG</li><li>SVG via JFreeChart</li></ul></p>
<p>This demo shows how SVG graphics are generated on server side using JFreeChart and Batik.<br><br>For sizing the charts a PANE with contained SIZETRANSFER is placed into the component. As result the chart always is re-created when the available screen space on client side changes.<br><br>&#34;Good old&#34; JFreeChart is still an excellent library for creating charts! Yes, charts are not animated on client side - but flexibility and number of chart types are excellent. - And not to forget: the charts are created on server side and can be embedded into e.g. documents that are created on server side, too. This demo only shows examples that are based on the &#34;Category data set&#34; - there are many more possibilities and diagram types available.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;objectbinding=&#34;#{d.DemoSvg2}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:fixgrid&nbsp;id=&#34;g_3&#34;&nbsp;bordercolor=&#34;#e0e0e0&#34;&nbsp;objectbinding=&#34;#{d.DemoSvg2.rows}&#34;&nbsp;sbvisibleamount=&#34;5&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_4&#34;&nbsp;text=&#34;Product&#34;&nbsp;width=&#34;100&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;.{product}&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;Revenue&nbsp;North&#34;&nbsp;width=&#34;50%&#34;&nbsp;&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_7&#34;&nbsp;align=&#34;right&#34;&nbsp;format=&#34;double&#34;&nbsp;value=&#34;.{revenueNorth}&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_8&#34;&nbsp;text=&#34;Revenue&nbsp;South&#34;&nbsp;width=&#34;50%&#34;&nbsp;&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_9&#34;&nbsp;align=&#34;right&#34;&nbsp;format=&#34;double&#34;&nbsp;value=&#34;.{revenueSouth}&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;/t:fixgrid&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_10&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_11&#34;&nbsp;&gt;<br>&lt;t:button&nbsp;id=&#34;g_12&#34;&nbsp;actionListener=&#34;#{d.DemoSvg2.onCreateNewRow}&#34;&nbsp;contentareafilled=&#34;false&#34;&nbsp;text=&#34;Add&nbsp;new&nbsp;Row&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_13&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_14&#34;&nbsp;actionListener=&#34;#{d.DemoSvg2.onUpdateChart}&#34;&nbsp;contentareafilled=&#34;false&#34;&nbsp;font=&#34;weight:bold&#34;&nbsp;foreground=&#34;#800000&#34;&nbsp;text=&#34;Update&nbsp;Chart&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_15&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_16&#34;&nbsp;&gt;<br>&lt;t:tabbedpane&nbsp;id=&#34;g_17&#34;&nbsp;height=&#34;100%&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:tabbedpanetab&nbsp;id=&#34;g_18&#34;&nbsp;padding=&#34;10&#34;&nbsp;text=&#34;SVG&nbsp;Charttab&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_19&#34;&nbsp;&gt;<br>&lt;t:pane&nbsp;id=&#34;g_20&#34;&nbsp;height=&#34;100%&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_21&#34;&nbsp;height=&#34;5&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_22&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_23&#34;&nbsp;width=&#34;50%&#34;&nbsp;/&gt;<br>&lt;t:combobox&nbsp;id=&#34;g_24&#34;&nbsp;actionListener=&#34;#{d.DemoSvg2.onUpdateChart}&#34;&nbsp;flush=&#34;true&#34;&nbsp;value=&#34;#{d.DemoSvg2.chartType}&#34;&nbsp;width=&#34;100&#34;&nbsp;&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_25&#34;&nbsp;value=&#34;H.Bar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_26&#34;&nbsp;value=&#34;V.Bar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_56&#34;&nbsp;value=&#34;H.StackedBar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_57&#34;&nbsp;value=&#34;V.StackedBar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_27&#34;&nbsp;value=&#34;H.3DBar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_28&#34;&nbsp;value=&#34;V.3DBar&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_29&#34;&nbsp;value=&#34;H.Line&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_30&#34;&nbsp;value=&#34;V.Line&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_46&#34;&nbsp;value=&#34;H.3DLine&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_47&#34;&nbsp;value=&#34;V.3DLine&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_31&#34;&nbsp;value=&#34;H.Area&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_32&#34;&nbsp;value=&#34;V.Area&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_53&#34;&nbsp;value=&#34;H.StackedArea&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_54&#34;&nbsp;value=&#34;V.StackedArea&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_49&#34;&nbsp;value=&#34;Pie&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_51&#34;&nbsp;value=&#34;3DPie&#34;&nbsp;/&gt;<br>&lt;t:comboboxitem&nbsp;id=&#34;g_59&#34;&nbsp;value=&#34;Waterfall&#34;&nbsp;/&gt;<br>&lt;/t:combobox&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_33&#34;&nbsp;width=&#34;50%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_34&#34;&nbsp;height=&#34;15&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_42&#34;&nbsp;&gt;<br>&lt;t:pane&nbsp;id=&#34;g_43&#34;&nbsp;height=&#34;100%;300&#34;&nbsp;padding=&#34;0&#34;&nbsp;rowdistance=&#34;0&#34;&nbsp;width=&#34;100%;400&#34;&nbsp;&gt;<br>&lt;t:sizetransfer&nbsp;id=&#34;g_44&#34;&nbsp;actionListener=&#34;#{d.DemoSvg2.onSizeChangeAction}&#34;&nbsp;flush=&#34;true&#34;&nbsp;sizevalue=&#34;#{d.DemoSvg2.clientSize}&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_35&#34;&nbsp;&gt;<br>&lt;t:svgviewer&nbsp;id=&#34;g_36&#34;&nbsp;actionListener=&#34;#{d.DemoSvg2.onSvgElementSelection}&#34;&nbsp;height=&#34;100%&#34;&nbsp;svg=&#34;#{d.DemoSvg2.svg}&#34;&nbsp;svgheight=&#34;#{d.DemoSvg2.svgHeight}&#34;&nbsp;svgwidth=&#34;#{d.DemoSvg2.svgWidth}&#34;&nbsp;width=&#34;100%&#34;&nbsp;withelementselection=&#34;true&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:pane&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_37&#34;&nbsp;height=&#34;5&#34;&nbsp;/&gt;<br>&lt;/t:pane&gt;<br>&lt;/t:row&gt;<br>&lt;/t:tabbedpanetab&gt;<br>&lt;t:tabbedpanetab&nbsp;id=&#34;g_38&#34;&nbsp;padding=&#34;10&#34;&nbsp;text=&#34;SVG&nbsp;Text&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_39&#34;&nbsp;&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_40&#34;&nbsp;height=&#34;100%&#34;&nbsp;text=&#34;#{d.DemoSvg2.svg}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:tabbedpanetab&gt;<br>&lt;/t:tabbedpane&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.awt.Color;<br>import&nbsp;java.io.ByteArrayOutputStream;<br>import&nbsp;java.io.OutputStreamWriter;<br>import&nbsp;java.io.Writer;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.apache.batik.dom.GenericDOMImplementation;<br>import&nbsp;org.apache.batik.svggen.SVGGraphics2D;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventSvgElementSelection;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDItem;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDListBinding;<br>import&nbsp;org.eclnt.util.log.CLog;<br>import&nbsp;org.eclnt.util.valuemgmt.ValueManager;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br>import&nbsp;org.jfree.chart.ChartFactory;<br>import&nbsp;org.jfree.chart.JFreeChart;<br>import&nbsp;org.jfree.chart.StandardChartTheme;<br>import&nbsp;org.jfree.chart.plot.PlotOrientation;<br>import&nbsp;org.jfree.data.category.DefaultCategoryDataset;<br>import&nbsp;org.jfree.util.TableOrder;<br>import&nbsp;org.w3c.dom.DOMImplementation;<br>import&nbsp;org.w3c.dom.Document;<br><br>public&nbsp;class&nbsp;DemoSvg2<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;WorkpageDispatchedPageBean<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;inner&nbsp;classes<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;class&nbsp;MyRow&nbsp;extends&nbsp;FIXGRIDItem<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_product;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_revenueNorth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;m_revenueSouth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getProduct()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_product;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setProduct(String&nbsp;product)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_product&nbsp;=&nbsp;product;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getRevenueNorth()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_revenueNorth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setRevenueNorth(double&nbsp;revenueNorth)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_revenueNorth&nbsp;=&nbsp;revenueNorth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getRevenueSouth()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_revenueSouth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setRevenueSouth(double&nbsp;revenueSouth)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_revenueSouth&nbsp;=&nbsp;revenueSouth;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;members<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;static&nbsp;String&nbsp;NORTH&nbsp;=&nbsp;&#34;North&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;static&nbsp;String&nbsp;SOUTH&nbsp;=&nbsp;&#34;South&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;static&nbsp;String&nbsp;HARDWARE&nbsp;=&nbsp;&#34;Hardware&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;static&nbsp;String&nbsp;SOFTWARE&nbsp;=&nbsp;&#34;Software&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;static&nbsp;String&nbsp;SERVICES&nbsp;=&nbsp;&#34;Services&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;FIXGRIDListBinding&lt;MyRow&gt;&nbsp;m_rows&nbsp;=&nbsp;new&nbsp;FIXGRIDListBinding&lt;MyRow&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_svg;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_chartType&nbsp;=&nbsp;&#34;H.Bar&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;m_clientWidth&nbsp;=&nbsp;-1;<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;m_clientHeight&nbsp;=&nbsp;-1;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;constructors<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoSvg2(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRefComponent(&#34;svgviewer&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyRow&nbsp;row;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row&nbsp;=&nbsp;new&nbsp;MyRow();&nbsp;row.setProduct(HARDWARE);&nbsp;row.setRevenueNorth(1000);&nbsp;row.setRevenueSouth(1200);&nbsp;m_rows.getItems().add(row);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row&nbsp;=&nbsp;new&nbsp;MyRow();&nbsp;row.setProduct(SOFTWARE);&nbsp;row.setRevenueNorth(800);&nbsp;row.setRevenueSouth(1000);&nbsp;m_rows.getItems().add(row);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row&nbsp;=&nbsp;new&nbsp;MyRow();&nbsp;row.setProduct(SERVICES);&nbsp;row.setRevenueNorth(1800);&nbsp;row.setRevenueSouth(2000);&nbsp;m_rows.getItems().add(row);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateChart();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;FIXGRIDListBinding&lt;MyRow&gt;&nbsp;getRows()&nbsp;{&nbsp;return&nbsp;m_rows;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setSvg(String&nbsp;value)&nbsp;{&nbsp;m_svg&nbsp;=&nbsp;value;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getSvg()&nbsp;{&nbsp;return&nbsp;m_svg;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setChartType(String&nbsp;value)&nbsp;{&nbsp;m_chartType&nbsp;=&nbsp;value;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getChartType()&nbsp;{&nbsp;return&nbsp;m_chartType;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onUpdateChart(ActionEvent&nbsp;ae)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateChart();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onCreateNewRow(ActionEvent&nbsp;ae)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyRow&nbsp;row&nbsp;=&nbsp;new&nbsp;MyRow();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row.setProduct(&#34;new&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_rows.getItems().add(row);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getClientSize()&nbsp;{&nbsp;return&nbsp;m_clientWidth&nbsp;+&nbsp;&#34;;&#34;&nbsp;+&nbsp;m_clientHeight;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setClientSize(String&nbsp;value)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int[]&nbsp;sizes&nbsp;=&nbsp;ValueManager.decodeStraighIntCSV(value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_clientWidth&nbsp;=&nbsp;sizes[0];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_clientHeight&nbsp;=&nbsp;sizes[1];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSizeChangeAction(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateChart();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getSvgWidth()&nbsp;{&nbsp;return&nbsp;m_clientWidth;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getSvgHeight()&nbsp;{&nbsp;return&nbsp;m_clientHeight;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSvgElementSelection(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventSvgElementSelection)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseActionEventSvgElementSelection&nbsp;e&nbsp;=&nbsp;(BaseActionEventSvgElementSelection)event;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccessWithPopup(e.getParams()[0]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;private&nbsp;usage<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;------------------------------------------------------------------------<br><br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;generateChart()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;not&nbsp;create&nbsp;chart&nbsp;if&nbsp;not&nbsp;sized&nbsp;yet<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_clientHeight&nbsp;&lt;&nbsp;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DefaultCategoryDataset&nbsp;ds&nbsp;=&nbsp;new&nbsp;DefaultCategoryDataset();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;m_rows.getItems().size();&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyRow&nbsp;row&nbsp;=&nbsp;m_rows.getItems().get(i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ds.setValue(row.getRevenueNorth(),NORTH,row.getProduct());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ds.setValue(row.getRevenueSouth(),SOUTH,row.getProduct());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;define&nbsp;chart&nbsp;theme&nbsp;without&nbsp;default&nbsp;light&nbsp;grey&nbsp;background...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StandardChartTheme&nbsp;theme&nbsp;=&nbsp;new&nbsp;StandardChartTheme(&#34;JFree&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theme.setChartBackgroundPaint(Color.white);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theme.setPlotBackgroundPaint(Color.white);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ChartFactory.setChartTheme(theme);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;nopw&nbsp;create&nbsp;chart<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JFreeChart&nbsp;chart&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_chartType.equals(&#34;H.Bar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createBarChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.Bar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createBarChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.StackedBar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createStackedBarChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.StackedBar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createStackedBarChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.3DBar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createBarChart3D(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.3DBar&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createBarChart3D(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.Line&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createLineChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.Line&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createLineChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.3DLine&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createLineChart3D(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.3DLine&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createLineChart3D(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.Area&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createAreaChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.Area&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createAreaChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;Pie&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createMultiplePieChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,ds,TableOrder.BY_COLUMN,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;3DPie&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createMultiplePieChart3D(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,ds,TableOrder.BY_COLUMN,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;H.StackedArea&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createStackedAreaChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.HORIZONTAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;V.StackedArea&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createStackedAreaChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(m_chartType.equals(&#34;Waterfall&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart&nbsp;=&nbsp;ChartFactory.createWaterfallChart(&#34;Sales&nbsp;by&nbsp;Product&nbsp;and&nbsp;Region&#34;,&#34;Region&#34;,&#34;Product&nbsp;Revenue&nbsp;(Mio&nbsp;EUR)&#34;,ds,PlotOrientation.VERTICAL,true,true,false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;Error(&#34;This&nbsp;char&nbsp;type&nbsp;is&nbsp;not&nbsp;known:&nbsp;&#34;&nbsp;+&nbsp;m_chartType);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;draw&nbsp;chart&nbsp;to&nbsp;SVG<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DOMImplementation&nbsp;domImpl&nbsp;=&nbsp;GenericDOMImplementation.getDOMImplementation();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Document&nbsp;document&nbsp;=&nbsp;domImpl.createDocument&nbsp;(null,&nbsp;&#34;svg&#34;,&nbsp;null);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SVGGraphics2D&nbsp;svgGenerator&nbsp;=&nbsp;new&nbsp;SVGGraphics2D(document);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chart.draw(svgGenerator,&nbsp;new&nbsp;java.awt.geom.Rectangle2D.Double(0,0,m_clientWidth,m_clientHeight));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayOutputStream&nbsp;bos&nbsp;=&nbsp;new&nbsp;ByteArrayOutputStream();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writer&nbsp;outsvg&nbsp;=&nbsp;new&nbsp;OutputStreamWriter(bos,&#34;UTF-8&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svgGenerator.stream(outsvg,true);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;new&nbsp;String(bos.toByteArray(),&#34;UTF-8&#34;);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;replace<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;m_svg.replace(&#34;&gt;&#34;+NORTH,&#34;&nbsp;cc_id=&#92;&#34;NORTH&#92;&#34;&nbsp;&gt;&#34;+NORTH);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;m_svg.replace(&#34;&gt;&#34;+SOUTH,&#34;&nbsp;cc_id=&#92;&#34;SOUTH&#92;&#34;&nbsp;&gt;&#34;+SOUTH);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;m_svg.replace(&#34;&gt;&#34;+HARDWARE,&#34;&nbsp;cc_id=&#92;&#34;HADRWARE&#92;&#34;&nbsp;&gt;&#34;+HARDWARE);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;m_svg.replace(&#34;&gt;&#34;+SOFTWARE,&#34;&nbsp;cc_id=&#92;&#34;SOFTWARE&#92;&#34;&nbsp;&gt;&#34;+SOFTWARE);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_svg&nbsp;=&nbsp;m_svg.replace(&#34;&gt;&#34;+SERVICES,&#34;&nbsp;cc_id=&#92;&#34;SERVICES&#92;&#34;&nbsp;&gt;&#34;+SERVICES);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;(Throwable&nbsp;t)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLog.L.log(CLog.LL_ERR,&#34;&#34;,t);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputError(&#34;Problem:&nbsp;&#34;&nbsp;+&nbsp;t.toString(),ValueManager.getStackstraceString(t));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>}<br></p>
</body>
</html>
