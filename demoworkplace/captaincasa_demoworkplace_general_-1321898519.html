<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>General</li><li>Client Integration</li><li>Client Cookies</li></ul></p>
<p>The component CLIENTCOOKIE stores and reads a string value within a client side cookie.<br><br>A cookie has a NAME-attribute. Please only use &#34;proper variable names&#34; without.<br><br>And a cookie has a VALUE-attribute. This attribute is used in two directions: if you change the value on server side, then the new value is written into the cookie on client side. And: if the component is started then the current content of the cookie is written into the VALUE - and it transfers the current client value from the client to the serve side.<br><br>Please note: there is a certain complexity involved in order to get the current cookie value of the client to the server side at startup point of time of the dialog: <br>The component transfers the cookie value with the next roundtrip from the client to the server side. So you have to trigger this roundtrip explicitly. The component to use is the component CALLSERVERONTRIGGER which executes one roundtrip when being triggered.<br><br>And please note: there is a component CLIENTLOCALSTORAGE doing exactly the same - but storing the data on client side in the local storage of the client.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:beanprocessing&nbsp;id=&#34;g_1&#34;&nbsp;&gt;<br>&lt;t:callserverontrigger&nbsp;id=&#34;g_2&#34;&nbsp;actionListener=&#34;#{d.DemoCookie.onRoundtripAction}&#34;&nbsp;trigger=&#34;#{d.DemoCookie.roundtripTrigger}&#34;&nbsp;/&gt;<br>&lt;t:clientcookie&nbsp;id=&#34;g_3&#34;&nbsp;name=&#34;test2&#34;&nbsp;value=&#34;#{d.DemoCookie.cookieTest2Content}&#34;&nbsp;/&gt;<br>&lt;t:clientcookie&nbsp;id=&#34;g_4&#34;&nbsp;name=&#34;test&#34;&nbsp;value=&#34;#{d.DemoCookie.cookieTestContent}&#34;&nbsp;/&gt;<br>&lt;/t:beanprocessing&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_5&#34;&nbsp;objectbinding=&#34;#{d.DemoCookie}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_6&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_7&#34;&nbsp;text=&#34;Cookie&nbsp;&amp;#34;test&amp;#34;&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_8&#34;&nbsp;text=&#34;#{d.DemoCookie.cookieTestContent}&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_9&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_10&#34;&nbsp;text=&#34;Cookie&nbsp;&amp;#34;test2&amp;#34;&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_11&#34;&nbsp;text=&#34;#{d.DemoCookie.cookieTest2Content}&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_12&#34;&nbsp;height=&#34;60&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_13&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_14&#34;&nbsp;labeltext=&#34;New&nbsp;test&nbsp;-&nbsp;content&#34;&nbsp;text=&#34;#{d.DemoCookie.newContent}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_15&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_16&#34;&nbsp;labeltext=&#34;test2&nbsp;-&nbsp;content&#34;&nbsp;text=&#34;#{d.DemoCookie.newContent2}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_17&#34;&nbsp;&gt;<br>&lt;t:button&nbsp;id=&#34;g_18&#34;&nbsp;actionListener=&#34;#{d.DemoCookie.onSetContent}&#34;&nbsp;text=&#34;Set&nbsp;Content&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.elements.util.Trigger;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoCookie}&#34;)<br><br>public&nbsp;class&nbsp;DemoCookie<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;Trigger&nbsp;m_roundtripTrigger&nbsp;=&nbsp;new&nbsp;Trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_newContent;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_cookieTestContent;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_cookieTest2Content;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_newContent2;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoCookie(IWorkpageDispatcher&nbsp;workpageDispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(workpageDispatcher);&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initiate&nbsp;one&nbsp;roundtrip&nbsp;through&nbsp;component&nbsp;CALLSERVERONTRIGGER<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;so&nbsp;that&nbsp;cookie&nbsp;value&nbsp;is&nbsp;immediately&nbsp;transferred&nbsp;at&nbsp;startup<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_roundtripTrigger.trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Trigger&nbsp;getRoundtripTrigger()&nbsp;{&nbsp;return&nbsp;m_roundtripTrigger;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getCookieTestContent()&nbsp;{&nbsp;return&nbsp;m_cookieTestContent;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setCookieTestContent(String&nbsp;value)&nbsp;{&nbsp;m_cookieTestContent&nbsp;=&nbsp;value;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getNewContent()&nbsp;{&nbsp;return&nbsp;m_newContent;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setNewContent(String&nbsp;value)&nbsp;{&nbsp;this.m_newContent&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getCookieTest2Content()&nbsp;{&nbsp;return&nbsp;m_cookieTest2Content;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setCookieTest2Content(String&nbsp;value)&nbsp;{&nbsp;this.m_cookieTest2Content&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getNewContent2()&nbsp;{&nbsp;return&nbsp;m_newContent2;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setNewContent2(String&nbsp;value)&nbsp;{&nbsp;this.m_newContent2&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onRoundtripAction(ActionEvent&nbsp;event)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;action&nbsp;required&nbsp;-&nbsp;the&nbsp;roundtrip&#39;s&nbsp;purpose&nbsp;is&nbsp;to&nbsp;let&nbsp;the&nbsp;CLIENTCOOKIE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;control&nbsp;pass&nbsp;the&nbsp;value.<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSetContent(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_cookieTestContent&nbsp;=&nbsp;m_newContent;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_cookieTest2Content&nbsp;=&nbsp;m_newContent2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_newContent&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_newContent2&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
