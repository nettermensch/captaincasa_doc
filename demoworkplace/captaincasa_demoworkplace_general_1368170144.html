<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>General</li><li>Client Integration</li><li>Generic Subdevice (Java Client only)</li></ul></p>
<p>The CLIENTSUBDEVICE component is a bridge to an implementation of the client side interface &#34;ISubDevice&#34;.<br><br>ISubDevice is a simple, generic interface to a subdevice (e.g. Scanner, Card Reader, ...). The technology how the client actually communicated to the subdevice (serial port? USB?) is completely hidden by the interface and is part of the concrete implementation.<br><br>The subdevice is created, initialized - and then both receives messages from the server side processing (SENDVALUE, SENDTRIGGER) and sends messages back to the server (calling the ACTIONLISTENER). A subdevice can be re-initizaled (INITVALUE,INITTRIGGER) or explicitly closed (CLOSETRIGGER).<br><br>In the demo the concrete subdevice implementation outputs information (e.g. when being initialized) to the client&#39;s console. And it regularly sends messages to the server side.<br><br>The communication to the subdevice is based on a &#34;one-String-only&#34; protocol. E.g. you may pass one INITVALUE to the subdevice. The content and format of this string (e.g. XML) is completely up to you.<br> </p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:beanprocessing&nbsp;id=&#34;g_1&#34;&nbsp;&gt;<br>&lt;t:clientsubdevice&nbsp;id=&#34;g_2&#34;&nbsp;actionListener=&#34;#{d.DemoClientSubDevice.onSubDeviceAction}&#34;&nbsp;initvalue=&#34;Some&nbsp;init&nbsp;value&#34;&nbsp;sendtrigger=&#34;#{d.DemoClientSubDevice.sendTrigger}&#34;&nbsp;sendvalue=&#34;#{d.DemoClientSubDevice.sendValue}&#34;&nbsp;subdeviceclassname=&#34;org.eclnt.client.util.subdevice.TestSubDevice&#34;&nbsp;/&gt;<br>&lt;/t:beanprocessing&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_3&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;objectbinding=&#34;#{d.DemoClientSubDevice}&#34;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;Value&nbsp;to&nbsp;send&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_6&#34;&nbsp;text=&#34;#{d.DemoClientSubDevice.sendValue}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_7&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_8&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_9&#34;&nbsp;actionListener=&#34;#{d.DemoClientSubDevice.onSendAction}&#34;&nbsp;text=&#34;Send!&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_10&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_11&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_12&#34;&nbsp;text=&#34;Protocol&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_13&#34;&nbsp;&gt;<br>&lt;t:textarea&nbsp;id=&#34;g_14&#34;&nbsp;enabled=&#34;false&#34;&nbsp;height=&#34;100%&#34;&nbsp;text=&#34;#{d.DemoClientSubDevice.protocol}&#34;&nbsp;width=&#34;100%&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventClientSubDevice;<br>import&nbsp;org.eclnt.jsfserver.elements.util.Trigger;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br>import&nbsp;org.eclnt.workplace.WorkpageDispatchedBean;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoClientSubDevice}&#34;)<br><br>public&nbsp;class&nbsp;DemoClientSubDevice<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_sendValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getSendValue()&nbsp;{&nbsp;return&nbsp;m_sendValue;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setSendValue(String&nbsp;value)&nbsp;{&nbsp;this.m_sendValue&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;Trigger&nbsp;m_sendTrigger&nbsp;=&nbsp;new&nbsp;Trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Trigger&nbsp;getSendTrigger()&nbsp;{&nbsp;return&nbsp;m_sendTrigger;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_protocol&nbsp;=&nbsp;&#34;&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getProtocol()&nbsp;{&nbsp;return&nbsp;m_protocol;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setProtocol(String&nbsp;value)&nbsp;{&nbsp;this.m_protocol&nbsp;=&nbsp;value;&nbsp;}<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoClientSubDevice(IWorkpageDispatcher&nbsp;workpageDispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(workpageDispatcher);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSendAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sendTrigger.trigger();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSubDeviceAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventClientSubDevice)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_protocol&nbsp;=&nbsp;((BaseActionEventClientSubDevice)&nbsp;event).getSubDeviceSendValue()&nbsp;+&nbsp;&#34;&#92;n&#34;&nbsp;+&nbsp;m_protocol;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
