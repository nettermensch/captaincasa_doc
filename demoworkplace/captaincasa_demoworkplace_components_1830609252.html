<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Drag &amp; Drop</li><li>Usage with Input Components</li></ul></p>
<p>This demo demonstrates how to use drag &amp; drop with input elements like fields and combo boxes. You need to pay attention to that the value within the DRAGSEND attribute might not be the one that you want to be transferred because the user might change the component&#39;s content on the screen side.<br><br>There are two possibilities to manage this situation:<br><br>(1) You specify the FLUSH attribute within the component to be set to true. In this case the flush to the server is executed first, then the drag/drop operation starts. In other words: the DRAGSEND property is refreshed when starting a drag &amp; drop operation.<br><br>(2) You do not pass the value of what is dragged into the DRAGSEND attribute, but you pass the information about &#34;who is the sending component&#34;. The drop receiver receives an event on server side (just the usual thing...) and then does not take the dropped value out of the drag-String, but it directly takes the value from the property that is represented by the dragging component.<br><br>In the titles of the demo, we differenciate between &#34;id based&#34; drag &amp; drop, and &#34;component based&#34; drag &amp; drop.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;objectbinding=&#34;#{d.DemoDragDropField}&#34;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:foldablepane&nbsp;id=&#34;g_3&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;text=&#34;The&nbsp;&amp;quot;by&nbsp;value&amp;quot;&nbsp;way&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_5&#34;&nbsp;dragsend=&#34;#{d.DemoDragDropField.fromFieldDragSend}&#34;&nbsp;flush=&#34;true&#34;&nbsp;text=&#34;#{d.DemoDragDropField.fromField}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_6&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_7&#34;&nbsp;text=&#34;&amp;gt;&amp;gt;&amp;gt;&nbsp;drop&nbsp;to&nbsp;&amp;gt;&amp;gt;&amp;gt;&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_8&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:field&nbsp;id=&#34;g_9&#34;&nbsp;actionListener=&#34;#{d.DemoDragDropField.onToFieldAction}&#34;&nbsp;dropreceive=&#34;field&#34;&nbsp;text=&#34;#{d.DemoDragDropField.toField}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_10&#34;&nbsp;&gt;<br>&lt;t:combobox&nbsp;id=&#34;g_11&#34;&nbsp;dragsend=&#34;#{d.DemoDragDropField.fromDragSend}&#34;&nbsp;flush=&#34;true&#34;&nbsp;validvaluesbinding=&#34;#{d.DemoDragDropField.comboVVs}&#34;&nbsp;value=&#34;#{d.DemoDragDropField.fromCombo}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_12&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_13&#34;&nbsp;text=&#34;&amp;gt;&amp;gt;&amp;gt;&nbsp;drop&nbsp;to&nbsp;&amp;gt;&amp;gt;&amp;gt;&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_14&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:combobox&nbsp;id=&#34;g_15&#34;&nbsp;actionListener=&#34;#{d.DemoDragDropField.onToAction}&#34;&nbsp;dropreceive=&#34;combo&#34;&nbsp;validvaluesbinding=&#34;#{d.DemoDragDropField.comboVVs}&#34;&nbsp;value=&#34;#{d.DemoDragDropField.toCombo}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:foldablepane&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_16&#34;&nbsp;&gt;<br>&lt;t:foldablepane&nbsp;id=&#34;g_17&#34;&nbsp;text=&#34;The&nbsp;&amp;quot;by&nbsp;component&amp;quot;&nbsp;way&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_18&#34;&nbsp;&gt;<br>&lt;t:combobox&nbsp;id=&#34;g_19&#34;&nbsp;dragsend=&#34;comboleft:dummy&#34;&nbsp;validvaluesbinding=&#34;#{d.DemoDragDropField.comboVVs}&#34;&nbsp;value=&#34;#{d.DemoDragDropField.fromCombo2}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_20&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_21&#34;&nbsp;text=&#34;&amp;gt;&amp;gt;&amp;gt;&nbsp;drop&nbsp;to&nbsp;&amp;gt;&amp;gt;&amp;gt;&#34;&nbsp;/&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_22&#34;&nbsp;width=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:combobox&nbsp;id=&#34;g_23&#34;&nbsp;actionListener=&#34;#{d.DemoDragDropField.onTo2Action}&#34;&nbsp;dropreceive=&#34;comboleft&#34;&nbsp;validvaluesbinding=&#34;#{d.DemoDragDropField.comboVVs}&#34;&nbsp;value=&#34;#{d.DemoDragDropField.toCombo2}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:foldablepane&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventDrop;<br>import&nbsp;org.eclnt.jsfserver.elements.util.ValidValuesBinding;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoDragDropField}&#34;)<br><br>public&nbsp;class&nbsp;DemoDragDropField<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFromFieldDragSend()&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#34;field:&#34;+m_fromField;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_toField;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getToField()&nbsp;{&nbsp;return&nbsp;m_toField;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setToField(String&nbsp;value)&nbsp;{&nbsp;m_toField&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_fromField&nbsp;=&nbsp;&#34;abc&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFromField()&nbsp;{&nbsp;return&nbsp;m_fromField;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFromField(String&nbsp;value)&nbsp;{&nbsp;m_fromField&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_toCombo2;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getToCombo2()&nbsp;{&nbsp;return&nbsp;m_toCombo2;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setToCombo2(String&nbsp;value)&nbsp;{&nbsp;m_toCombo2&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_fromCombo2&nbsp;=&nbsp;&#34;1&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFromCombo2()&nbsp;{&nbsp;return&nbsp;m_fromCombo2;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFromCombo2(String&nbsp;value)&nbsp;{&nbsp;m_fromCombo2&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoDragDropField(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_comboVVs.addValidValue(&#34;1&#34;,&#34;First&nbsp;item&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_comboVVs.addValidValue(&#34;2&#34;,&#34;Second&nbsp;item&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_comboVVs.addValidValue(&#34;3&#34;,&#34;Third&nbsp;item&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_comboVVs.addValidValue(&#34;4&#34;,&#34;Fourth&nbsp;item&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFromDragSend()&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#34;combo:&#34;+m_fromCombo;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;ValidValuesBinding&nbsp;m_comboVVs&nbsp;=&nbsp;new&nbsp;ValidValuesBinding();<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ValidValuesBinding&nbsp;getComboVVs()&nbsp;{&nbsp;return&nbsp;m_comboVVs;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setComboVVs(ValidValuesBinding&nbsp;value)&nbsp;{&nbsp;m_comboVVs&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_toCombo;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getToCombo()&nbsp;{&nbsp;return&nbsp;m_toCombo;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setToCombo(String&nbsp;value)&nbsp;{&nbsp;m_toCombo&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_fromCombo&nbsp;=&nbsp;&#34;1&#34;;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFromCombo()&nbsp;{&nbsp;return&nbsp;m_fromCombo;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFromCombo(String&nbsp;value)&nbsp;{&nbsp;m_fromCombo&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onToAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventDrop)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;di&nbsp;=&nbsp;((BaseActionEventDrop)event).getDragInfo();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(di.startsWith(&#34;combo:&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_toCombo&nbsp;=&nbsp;di.substring(&#34;combo:&#34;.length());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onToFieldAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventDrop)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;di&nbsp;=&nbsp;((BaseActionEventDrop)event).getDragInfo();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(di.startsWith(&#34;field:&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_toField&nbsp;=&nbsp;di.substring(&#34;field:&#34;.length());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onTo2Action(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventDrop)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;di&nbsp;=&nbsp;((BaseActionEventDrop)event).getDragInfo();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(di.startsWith(&#34;comboleft:&#34;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_toCombo2&nbsp;=&nbsp;m_fromCombo2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
