<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Components</li><li>Straight Controls</li><li>Combobox and List</li><li>List</li></ul></p>
<p>The LIST component provides a selection of items, each one represented by an Id and by a value.<br><br>The items are passed as semicolon separated list, the sequence being &#34;id1;text1;id2;text2;...&#34;. Please use the ValueManager class for assembling the list - it correctly handles situations in which e.g. the text contains a semicolon character itself.<br><br>The LIST can either select one or more than one items. You can configure by using attribute MULTISELECT. All the selected id-values are passed back to the server side as semicolon separated list.<br><br>Please not: the list is a component that does NOT send changes to its selection immediately to the server side. This is the same behavior as all typical components - but for the list it needs to be emphasized.<br>In case you want to directly react on list selections, you need to define FLUSH to be true. In this case the list selection will be transferred to the server when the user selects the item with the mouse, or if the user selectes the items with the return or space bar key. On server side two events will be thrown: (1) the Flush-Event and (2) an Invoke-Event, if the user clicked the mouse or selected the item with the keyboard.<br><br>The example shows how to use the list in the valid value processing of a COMBOFIELD as well.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;objectbinding=&#34;#{d.DemoList}&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_3&#34;&nbsp;font=&#34;size:14&#34;&nbsp;text=&#34;List&nbsp;embedded&nbsp;in&nbsp;page:&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_4&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_5&#34;&nbsp;text=&#34;Server&nbsp;binding&nbsp;as&nbsp;String&nbsp;with&nbsp;&amp;#34;id;text&amp;#34;&nbsp;-&nbsp;pairs&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_6&#34;&nbsp;&gt;<br>&lt;t:list&nbsp;id=&#34;g_7&#34;&nbsp;actionListener=&#34;#{d.DemoList.onListAction}&#34;&nbsp;flush=&#34;true&#34;&nbsp;height=&#34;100&#34;&nbsp;listselection=&#34;#{d.DemoList.listSelection}&#34;&nbsp;listvalues=&#34;#{d.DemoList.listValues}&#34;&nbsp;multiselect=&#34;true&#34;&nbsp;width=&#34;200&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_8&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_9&#34;&nbsp;text=&#34;Selection&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_10&#34;&nbsp;text=&#34;#{d.DemoList.listSelection}&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_11&#34;&nbsp;height=&#34;10&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_12&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_13&#34;&nbsp;text=&#34;Server&nbsp;binding&nbsp;as&nbsp;String&nbsp;with&nbsp;ValidValuesBinding&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_14&#34;&nbsp;&gt;<br>&lt;t:list&nbsp;id=&#34;g_15&#34;&nbsp;actionListener=&#34;#{d.DemoList.onListAction}&#34;&nbsp;flush=&#34;true&#34;&nbsp;font=&#34;size:16&#34;&nbsp;height=&#34;100&#34;&nbsp;listselection=&#34;#{d.DemoList.list2Selection}&#34;&nbsp;listvalues=&#34;#{d.DemoList.list2Values}&#34;&nbsp;multiselect=&#34;true&#34;&nbsp;width=&#34;200&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_16&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_17&#34;&nbsp;text=&#34;Selection&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:label&nbsp;id=&#34;g_18&#34;&nbsp;text=&#34;#{d.DemoList.list2Selection}&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_19&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_20&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_21&#34;&nbsp;font=&#34;size:14&#34;&nbsp;text=&#34;List&nbsp;as&nbsp;value&nbsp;list&nbsp;for&nbsp;COMBOFIELD:&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_22&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_23&#34;&nbsp;text=&#34;Department&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:combofield&nbsp;id=&#34;g_24&#34;&nbsp;actionListener=&#34;#{d.DemoList.onDepartmentAction}&#34;&nbsp;text=&#34;#{d.DemoList.department}&#34;&nbsp;width=&#34;150&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br>import&nbsp;java.util.ArrayList;<br>import&nbsp;java.util.List;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.ISetId;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.IdTextSelection;<br>import&nbsp;org.eclnt.jsfserver.defaultscreens.Statusbar;<br>import&nbsp;org.eclnt.jsfserver.elements.events.BaseActionEventValueHelp;<br>import&nbsp;org.eclnt.jsfserver.elements.util.ValidValuesBinding;<br>import&nbsp;org.eclnt.util.valuemgmt.ValueManager;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoList}&#34;)<br><br>public&nbsp;class&nbsp;DemoList<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;PageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;Serializable<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_department;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_listValues;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_listSelection;<br>&nbsp;&nbsp;&nbsp;&nbsp;ValidValuesBinding&nbsp;m_list2Values&nbsp;=&nbsp;new&nbsp;ValidValuesBinding();<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;m_list2Selection;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoList(IWorkpageDispatcher&nbsp;workpageDispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(workpageDispatcher);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRefComponent(&#34;list&#34;);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;buildin&nbsp;id;text&nbsp;pair&nbsp;string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;String&gt;&nbsp;ls&nbsp;=&nbsp;new&nbsp;ArrayList&lt;String&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;30;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls.add(&#34;ID&#34;+i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls.add(&#34;Item&nbsp;&#34;+i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_listValues&nbsp;=&nbsp;ValueManager.encodeCSV(ls);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;building&nbsp;ValidValuesBinding<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;20;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_list2Values.addValidValue(&#34;ID&#34;+i,&#34;Item&nbsp;&#34;&nbsp;+&nbsp;i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_listSelection&nbsp;=&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getListSelection()&nbsp;{&nbsp;return&nbsp;m_listSelection;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setListSelection(String&nbsp;listSelection)&nbsp;{&nbsp;m_listSelection&nbsp;=&nbsp;listSelection;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getListValues()&nbsp;{&nbsp;return&nbsp;m_listValues;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getDepartment()&nbsp;{&nbsp;return&nbsp;m_department;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setDepartment(String&nbsp;value)&nbsp;{&nbsp;this.m_department&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ValidValuesBinding&nbsp;getList2Values()&nbsp;{&nbsp;return&nbsp;m_list2Values;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getList2Selection()&nbsp;{&nbsp;return&nbsp;m_list2Selection;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setList2Selection(String&nbsp;value)&nbsp;{&nbsp;this.m_list2Selection&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onListAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statusbar.outputSuccess(&#34;List&nbsp;selection&nbsp;was&nbsp;updated:&nbsp;&#34;&nbsp;+&nbsp;m_listSelection&nbsp;+&nbsp;&#34;&nbsp;//&nbsp;&#34;&nbsp;+&nbsp;m_list2Selection);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onDepartmentAction(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event&nbsp;instanceof&nbsp;BaseActionEventValueHelp)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IdTextSelection&nbsp;idts&nbsp;=&nbsp;IdTextSelection.createListInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;20;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idts.addLine(&#34;Department&nbsp;&#34;&nbsp;+&nbsp;i,&#34;Department&nbsp;&#34;&nbsp;+&nbsp;i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idts.preselect(m_department);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idts.setCallBack(new&nbsp;ISetId()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setId(String&nbsp;id)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_department&nbsp;=&nbsp;id;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></p>
</body>
</html>
