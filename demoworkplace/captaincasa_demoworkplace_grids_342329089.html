<html>
<head>
<style>
.java {font-family: monospace;background-color: #F0F0F0;}
.xml {font-family: monospace;background-color: #F0F0F0;}
</style>
</head>
<body>
<p>The context of this demo is the creation of a dialog using the CaptainCasa framework for the following purpose: <ul><li>Grids &amp; Trees</li><li>Grids and Trees</li><li>Selection Issues</li><li>Item selection and focus</li></ul></p>
<p>The grid method &#34;selectAndFocus&#34; is a quite powerful one: it selects the item, ensure that it is visible and puts the focus into the first focus-able component of the item.<br><br>There is more behind the item positioning than you might be aware of...: at server side, with an initial grid with variable number of rows (i.e. height is maintained), there is no knowledge about how many items are visible on client side. As result, there might be an automated scrolling for initial screens so that the item is visible.<br><br>After the initialization phase of the grid (and after the first roundtrip of the grid to the server), the server now knows how many items do fit into the grid on client side. From now on there is no necessity for automated scrolling anymore.</p>
<p>This is the XML layout definition:</p>
<p class="xml">&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;utf-8&#34;?&gt;<br>&lt;t:layoutdefinition&nbsp;xmlns:t=&#34;http://www.CaptainCasa.com/controllibrary/t&#34;&nbsp;xmlns:tpbc=&#34;http://www.CaptainCasa.com/controllibrary/tpbc&#34;&nbsp;&gt;<br>&lt;t:rowdemobodypane&nbsp;id=&#34;g_1&#34;&nbsp;rowdistance=&#34;#{ccstylevalue[&#39;@defaultrowdistance@&#39;]}&#34;&nbsp;objectbinding=&#34;#{d.DemoGridSelectFocus}&#34;&gt;<br>&lt;t:row&nbsp;id=&#34;g_2&#34;&nbsp;&gt;<br>&lt;t:label&nbsp;id=&#34;g_3&#34;&nbsp;text=&#34;Index&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:formattedfield&nbsp;id=&#34;g_4&#34;&nbsp;format=&#34;int&#34;&nbsp;value=&#34;#{d.DemoGridSelectFocus.indexToBeSelected}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:row&nbsp;id=&#34;g_5&#34;&nbsp;&gt;<br>&lt;t:coldistance&nbsp;id=&#34;g_6&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;t:button&nbsp;id=&#34;g_7&#34;&nbsp;actionListener=&#34;#{d.DemoGridSelectFocus.onSelectAndFocus}&#34;&nbsp;text=&#34;Select&nbsp;and&nbsp;Focus&#34;&nbsp;/&gt;<br>&lt;/t:row&gt;<br>&lt;t:rowdistance&nbsp;id=&#34;g_8&#34;&nbsp;height=&#34;20&#34;&nbsp;/&gt;<br>&lt;t:row&nbsp;id=&#34;g_9&#34;&nbsp;&gt;<br>&lt;t:fixgrid&nbsp;id=&#34;g_10&#34;&nbsp;bordercolor=&#34;#{ccstylevalue.ccLightBorderColor}&#34;&nbsp;borderheight=&#34;1&#34;&nbsp;borderwidth=&#34;1&#34;&nbsp;height=&#34;100%&#34;&nbsp;objectbinding=&#34;#{d.DemoGridSelectFocus.grid}&#34;&nbsp;sbvisibleamount=&#34;40&#34;&nbsp;width=&#34;100%&#34;&nbsp;&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_11&#34;&nbsp;text=&#34;First&nbsp;Name&#34;&nbsp;width=&#34;50%&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_12&#34;&nbsp;text=&#34;.{firstName}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;t:gridcol&nbsp;id=&#34;g_13&#34;&nbsp;text=&#34;Last&nbsp;Name&#34;&nbsp;width=&#34;50%&#34;&nbsp;&gt;<br>&lt;t:field&nbsp;id=&#34;g_14&#34;&nbsp;text=&#34;.{lastName}&#34;&nbsp;width=&#34;100&#34;&nbsp;/&gt;<br>&lt;/t:gridcol&gt;<br>&lt;/t:fixgrid&gt;<br>&lt;/t:row&gt;<br>&lt;/t:rowdemobodypane&gt;<br>&lt;t:pageaddons&nbsp;id=&#34;g_pa&#34;/&gt;<br>&lt;/t:layoutdefinition&gt;</p>
<p>This is the Java code:</p>
<p class="java">package&nbsp;workplace;<br><br>import&nbsp;java.io.Serializable;<br><br>import&nbsp;javax.faces.event.ActionEvent;<br><br>import&nbsp;org.eclnt.editor.annotations.CCGenClass;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDItem;<br>import&nbsp;org.eclnt.jsfserver.elements.impl.FIXGRIDListBinding;<br>import&nbsp;org.eclnt.jsfserver.util.ClientTestLog;<br>import&nbsp;org.eclnt.jsfserver.util.IClientLogAware;<br>import&nbsp;org.eclnt.workplace.IWorkpageDispatcher;<br><br>@CCGenClass&nbsp;(expressionBase=&#34;#{d.DemoGridSelectFocus}&#34;)<br><br>public&nbsp;class&nbsp;DemoGridSelectFocus&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;extends&nbsp;WorkpageDispatchedPageBean<br>&nbsp;&nbsp;&nbsp;&nbsp;implements&nbsp;IClientLogAware<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;class&nbsp;GridItem&nbsp;extends&nbsp;FIXGRIDItem&nbsp;implements&nbsp;java.io.Serializable<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_lastName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getLastName()&nbsp;{&nbsp;return&nbsp;m_lastName;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setLastName(String&nbsp;value)&nbsp;{&nbsp;m_lastName&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;String&nbsp;m_firstName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getFirstName()&nbsp;{&nbsp;return&nbsp;m_firstName;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setFirstName(String&nbsp;value)&nbsp;{&nbsp;m_firstName&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;DemoGridSelectFocus(IWorkpageDispatcher&nbsp;dispatcher)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(dispatcher);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;100;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GridItem&nbsp;gi&nbsp;=&nbsp;new&nbsp;GridItem();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gi.setFirstName(&#34;First&nbsp;&#34;&nbsp;+&nbsp;i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gi.setLastName(&#34;Last&nbsp;&#34;&nbsp;+&nbsp;i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_grid.getItems().add(gi);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initial&nbsp;focus&nbsp;to&nbsp;row&nbsp;30<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_grid.selectAndFocusItem(m_grid.getItems().get(30));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_indexToBeSelected&nbsp;=&nbsp;30;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;int&nbsp;m_indexToBeSelected;<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;FIXGRIDListBinding&lt;GridItem&gt;&nbsp;m_grid&nbsp;=&nbsp;new&nbsp;FIXGRIDListBinding&lt;GridItem&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;FIXGRIDListBinding&lt;GridItem&gt;&nbsp;getGrid()&nbsp;{&nbsp;return&nbsp;m_grid;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setGrid(FIXGRIDListBinding&lt;GridItem&gt;&nbsp;value)&nbsp;{&nbsp;m_grid&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;getIndexToBeSelected()&nbsp;{&nbsp;return&nbsp;m_indexToBeSelected;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setIndexToBeSelected(int&nbsp;value)&nbsp;{&nbsp;m_indexToBeSelected&nbsp;=&nbsp;value;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;onSelectAndFocus(ActionEvent&nbsp;event)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_grid.deselectCurrentSelection();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_grid.selectAndFocusItem(m_grid.getItems().get(m_indexToBeSelected));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;onCreateClientTestLogMessage()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GridItem&nbsp;gi&nbsp;=&nbsp;m_grid.getSelectedItem();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(gi&nbsp;!=&nbsp;null)&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientTestLog.addClientTestLogMessage(&#34;Selected&nbsp;item:&nbsp;&#34;&nbsp;+&nbsp;gi.getFirstName());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClientTestLog.addClientTestLogMessage(&#34;Selected&nbsp;item:&nbsp;nothing&nbsp;selected&#34;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>}<br></p>
</body>
</html>
